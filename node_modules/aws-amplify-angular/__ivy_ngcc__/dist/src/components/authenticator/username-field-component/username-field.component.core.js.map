{"version":3,"file":"username-field.component.core.js","sources":["../../../../../src/components/authenticator/username-field-component/username-field.component.core.ts"],"names":[],"mappings":"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","sourcesContent":["// tslint:disable\n/*\n * Copyright 2017-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n// tslint:enable\n\nimport {\n\tComponent,\n\tInput,\n\tOnInit,\n\tEventEmitter,\n\tInject,\n\tOutput,\n} from '@angular/core';\nimport { labelMap } from '../common';\nimport {\n\tUsernameAttributes,\n\tUsernameFieldOutput,\n\tPhoneFieldOutput,\n} from '../types';\nimport { AmplifyService } from '../../../providers/amplify.service';\nimport { auth } from '../../../assets/data-test-attributes';\n\nconst template = `\n<div class=\"amplify-amplify-form-row amplify-signin-username\">\n    <div *ngIf=\"this._usernameAttributes === 'email'\">\n        <label class=\"amplify-input-label\" for=\"emailField\"> {{ this.amplifyService.i18n().get('Email') }} *</label>\n        <input\n            #emailField\n            class=\"amplify-form-input\"\n            type=\"email\"\n            placeholder=\"{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}\"\n            (keyup)=\"setEmail($event.target.value)\"\n            data-test=\"${auth.genericAttrs.emailInput}\"\n        />\n    </div>\n    <div *ngIf=\"this._usernameAttributes === 'phone_number'\">\n        <amplify-auth-phone-field-core\n            (phoneFieldChanged)=\"onPhoneFieldChanged($event)\"\n        ></amplify-auth-phone-field-core>\n    </div>\n    <div *ngIf=\"this._usernameAttributes !== 'email' && this._usernameAttributes !== 'phone_number'\">\n        <label class=\"amplify-input-label\" for=\"usernameField\"> {{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</label>\n        <input\n            #usernameField\n            class=\"amplify-form-input\"\n            type=\"text\"\n            value=\"{{this.username}}\"\n            placeholder=\"{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}\"\n            (keyup)=\"setUsername($event.target.value)\"\n            data-test=\"${auth.genericAttrs.usernameInput}\"\n        />\n    </div>\n</div>\n`;\n\n@Component({\n\tselector: 'amplify-auth-username-field-core',\n\ttemplate,\n})\nexport class UsernameFieldComponentCore implements OnInit {\n\t_usernameAttributes: string = UsernameAttributes.USERNAME;\n\t_placeholder: string = '';\n\tusername: string;\n\n\tconstructor(@Inject(AmplifyService) public amplifyService: AmplifyService) {\n\t\tthis.onPhoneFieldChanged = this.onPhoneFieldChanged.bind(this);\n\t}\n\n\t@Input()\n\tset data(data: any) {\n\t\tthis._usernameAttributes = data.usernameAttributes;\n\t\tthis._placeholder = data.placeholder;\n\t}\n\n\t@Input()\n\tset usernameAttributes(usernameAttributes: string) {\n\t\tthis._usernameAttributes = usernameAttributes;\n\t}\n\n\t@Input()\n\tset placeholder(placeholder: string) {\n\t\tthis._placeholder = placeholder;\n\t}\n\n\t@Output()\n\tusernameFieldChanged: EventEmitter<UsernameFieldOutput> = new EventEmitter<\n\t\tUsernameFieldOutput\n\t>();\n\n\tngOnInit() {\n\t\tif (\n\t\t\twindow &&\n\t\t\twindow.location &&\n\t\t\twindow.location.search &&\n\t\t\tthis._usernameAttributes !== 'email' &&\n\t\t\tthis._usernameAttributes !== 'phone_number'\n\t\t) {\n\t\t\tconst searchParams = new URLSearchParams(window.location.search);\n\t\t\tconst username = searchParams ? searchParams.get('username') : undefined;\n\t\t\tthis.setUsername(username);\n\t\t\tthis.username = username;\n\t\t}\n\t}\n\n\tngOnDestroy() {}\n\n\tsetUsername(username: string) {\n\t\tthis.usernameFieldChanged.emit({\n\t\t\tusername,\n\t\t});\n\t}\n\n\tsetEmail(email: string) {\n\t\tthis.usernameFieldChanged.emit({\n\t\t\temail,\n\t\t});\n\t}\n\n\tgetUsernameLabel() {\n\t\treturn (\n\t\t\tlabelMap[this._usernameAttributes as string] || this._usernameAttributes\n\t\t);\n\t}\n\n\tgetPlaceholder() {\n\t\treturn this.amplifyService\n\t\t\t.i18n()\n\t\t\t.get(`${this.getUsernameLabel()}` || this._placeholder);\n\t}\n\n\tonPhoneFieldChanged(event: PhoneFieldOutput) {\n\t\tthis.usernameFieldChanged.emit({\n\t\t\t...event,\n\t\t});\n\t}\n}\n"]}